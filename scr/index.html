<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>One Short Life</title>
    <link rel="stylesheet" href="osl_styles.css">
</head>
<body>
<div id="player-section">
    <h2>Player Info</h2>
    <p>Age: <span id="age">10</span> (Day: <span id="day">1</span>) <button id="pause-button" onclick="toggleTime()">Pause Time</button> <button id="speed-button" onclick="toggleSpeed()">Double Speed</button></p>
    <p>Gold: <span id="gold">0</span></p>
    <p>Total Income: <span id="total-income">0</span></p>
    <p>Total Spending: <span id="total-spending">0</span></p>
    <p>Balance: <span id="balance">0</span></p>
    <p>Property: <span id="property">Street Shelter</span></p>
    <p>Current Job: <span id="current-job">Begging</span></p>
</div>
<div id="tabs-section">
    <button onclick="showTab('jobs')">Jobs</button>
    <button onclick="showTab('skills')">Skills</button>
    <button onclick="showTab('assets')">Assets</button>
    <button onclick="showTab('events')">Active Events</button>
</div>

<div id="content-section">
    <div id="jobs" class="tab-content">
        <h3>Jobs</h3>
        <p>Current Job: <span id="current-job">Begging</span></p>
        <p>Experience: <span id="job-experience">0</span></p>
        <button onclick="switchJob('begging')">Begging (1 gold/day)</button>
        <button onclick="switchJob('thieve')">Thieve (2 gold/day)</button>
    </div>
    <div id="skills" class="tab-content">
        <h3>Skills</h3>
        <p>Strength Level: <span id="strength-level">1</span> (Experience: <span id="strength-experience">0</span>)</p>
        <p>Dexterity Level: <span id="dexterity-level">1</span> (Experience: <span id="dexterity-experience">0</span>)</p>
        <p>Concentration Level: <span id="concentration-level">1</span> (Experience: <span id="concentration-experience">0</span>)</p>
        <button onclick="practiceSkill('strength')">Practice Strength</button>
        <button onclick="practiceSkill('dexterity')">Practice Dexterity</button>
        <button onclick="practiceSkill('concentration')">Practice Concentration</button>
    </div>
    <div id="assets" class="tab-content">
        <h3>Assets</h3>
        <p>Property: <span id="property-info">Street Shelter</span></p>
        <p>Inventory: <span id="inventory">None</span></p>
    </div>
    <div id="events" class="tab-content">
        <h3>Active Events</h3>
        <p>No active events at the moment.</p>
    </div>
</div>

<script>
    let character = {
        age: 10,
        day: 1,
        gold: 0,
        totalIncome: 0,
        totalSpending: 0,
        balance: 0,
        property: "Street Shelter",
        currentJob: {
            name: "Begging",
            experience: 0,
            baseIncome: 1
        },
        jobs: {
            begging: { name: "Begging", baseIncome: 1, experience: 0 },
            thieve: { name: "Thieve", baseIncome: 2, experience: 0 }
        },
        skills: {
            strength: { level: 1, experience: 0 },
            dexterity: { level: 1, experience: 0 },
            concentration: { level: 1, experience: 0 }
        }
    };

    let gameInterval;
    let intervalSpeed = 1000;
    let isPaused = false;

    function updatePlayerSection() {
        const updates = {
            day: character.day,
            age: character.age,
            gold: character.gold,
            'total-income': character.totalIncome,
            'total-spending': character.totalSpending,
            balance: character.balance,
            property: character.property,
            'current-job': character.currentJob.name,
            'job-experience': character.jobs[character.currentJob.name.toLowerCase()].experience,
            'strength-level': character.skills.strength.level,
            'strength-experience': character.skills.strength.experience,
            'dexterity-level': character.skills.dexterity.level,
            'dexterity-experience': character.skills.dexterity.experience,
            'concentration-level': character.skills.concentration.level,
            'concentration-experience': character.skills.concentration.experience
        };
        for (let id in updates) {
            document.getElementById(id).innerText = updates[id];
        }
    }

    function toggleSpeed() {
        const isDoubleSpeed = intervalSpeed === 1000;
        intervalSpeed = isDoubleSpeed ? 500 : 1000;
        document.getElementById("speed-button").innerText = isDoubleSpeed ? "Normal Speed" : "Double Speed";
        clearInterval(gameInterval);
        gameInterval = setInterval(advanceTime, intervalSpeed);
    }

    function switchJob(job) {
        if (character.jobs[job]) {
            character.currentJob.name = character.jobs[job].name;
            character.currentJob.baseIncome = character.jobs[job].baseIncome;
            character.jobs[character.currentJob.name.toLowerCase()].experience = character.currentJob.experience;
            character.currentJob.experience = character.jobs[job].experience;
            updatePlayerSection();
        }
    }

    function showTab(tabId) {
        let tabs = document.getElementsByClassName("tab-content");
        for (let tab of tabs) {
            tab.style.display = "none";
        }
        document.getElementById(tabId).style.display = "block";
    }

    function workJob() {
        // Simulate working to earn gold and gain job experience
        let income = character.currentJob.baseIncome + (character.currentJob.experience * 0.1);
        income = Math.floor(income); // Round down to integer value
        character.totalIncome += income;
        character.jobs[character.currentJob.name.toLowerCase()].experience += 5;
        character.currentJob.experience = character.jobs[character.currentJob.name.toLowerCase()].experience;
        updatePlayerSection();
    }

    function practiceSkill(skill) {
        // Practice a skill to gain experience and level up
        if (character.skills[skill]) {
            character.skills[skill].experience += 10;
            if (character.skills[skill].experience >= character.skills[skill].level * 100) {
                character.skills[skill].experience = 0;
                character.skills[skill].level++;
            }
            updatePlayerSection();
        }
    }

    function advanceTime() {
        if (!isPaused) {
            advanceDay();
            character.totalIncome = character.currentJob.baseIncome;
            character.balance += character.totalIncome - character.totalSpending;

            if (character.age >= 80) {
                clearInterval(gameInterval);
                alert("The character has reached the end of their life.");
            }
            updatePlayerSection();
        }
    }

    function advanceDay() {
        character.day += 1;
        if (character.day > 365) {
            character.age += 1;
            character.day = 1;
        }
    }

    function toggleTime() {
        isPaused = !isPaused;
        document.getElementById("pause-button").innerText = isPaused ? "Continue Time" : "Pause Time";
    }

    // Start advancing the age every second
    gameInterval = setInterval(advanceTime, intervalSpeed);

    // Initialize player section
    updatePlayerSection();
</script>
</body>
</html>
